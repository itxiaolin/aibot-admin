/*! 
 Build based on gin-vue-admin 
 Time : 1678354544000 */
/* empty css             */import{E as a,a as e}from"./form-item.b18f90c3.js";/* empty css               *//* empty css              */import{_ as t,u as l,r as s,a as r,bg as i,b as o,E as n,o as d,c as p,d as c,a2 as u,e as m,w as g,aF as h,g as f,bh as _,a1 as v,f as b,bi as y,bj as w,h as k,j}from"./index.12a9298d.js";import{c as I}from"./initdb.72e9afe5.js";import L from"./bottomInfo.91bad5e6.js";import"./_Uint8Array.f5d85d65.js";import"./_initCloneObject.8371cae6.js";import"./divider.5f849ee4.js";const V=""+new URL("docs.2aa96a87.png",import.meta.url).href,U=""+new URL("kefu.825734dc.png",import.meta.url).href,C=""+new URL("github.b6042bac.png",import.meta.url).href,x=""+new URL("video.24d1e7fa.png",import.meta.url).href,E=a=>(y("data-v-1819488d"),a=a(),w(),a),N={id:"userLayout"},z={class:"login_panel"},R={class:"login_panel_form"},A={class:"login_panel_form_title"},P=["src"],$={class:"login_panel_form_title_p"},q={class:"vPicBox"},D={class:"vPic"},F=["src"],G=k("前往初始化"),K=k("登 录"),M=E((()=>c("div",{class:"login_panel_right"},null,-1))),O={class:"login_panel_foot"},B=f('<div class="links" data-v-1819488d><a href="http://doc.henrongyi.top/" target="_blank" data-v-1819488d><img src="'+V+'" class="link-icon" alt="文档" data-v-1819488d></a><a href="https://support.qq.com/product/371961" target="_blank" data-v-1819488d><img src="'+U+'" class="link-icon" alt="客服" data-v-1819488d></a><a href="https://github.com/flipped-aurora/gin-vue-admin" target="_blank" data-v-1819488d><img src="'+C+'" class="link-icon" alt="github" data-v-1819488d></a><a href="https://space.bilibili.com/322210472" target="_blank" data-v-1819488d><img src="'+x+'" class="link-icon" alt="视频站" data-v-1819488d></a></div>',1),H={class:"copyright"},J={name:"Login"},Q=t(Object.assign(J,{setup(t){const f=l(),y=()=>{_({}).then((async a=>{U.captcha.push({max:a.data.captchaLength,min:a.data.captchaLength,message:`请输入${a.data.captchaLength}位验证码`,trigger:"blur"}),k.value=a.data.picPath,V.captchaId=a.data.captchaId,V.openCaptcha=a.data.openCaptcha}))};y();const w=s(null),k=s(""),V=r({username:"admin",password:"123456",captcha:"",captchaId:"",openCaptcha:!1}),U=r({username:[{validator:(a,e,t)=>{if(e.length<5)return t(new Error("请输入正确的用户名"));t()},trigger:"blur"}],password:[{validator:(a,e,t)=>{if(e.length<6)return t(new Error("请输入正确的密码"));t()},trigger:"blur"}],captcha:[{message:"验证码格式不正确",trigger:"blur"}]}),C=i(),x=()=>{w.value.validate((async a=>{if(!a)return j({type:"error",message:"请正确填写登录信息",showClose:!0}),y(),!1;await(async()=>await C.LoginIn(V))()||y()}))},E=async()=>{var a;const e=await I();0===e.code&&((null==(a=e.data)?void 0:a.needInit)?(C.NeedInit(),f.push({name:"Init"})):j({type:"info",message:"已配置数据库信息，无法初始化"}))};return(t,l)=>{const s=o,r=a,i=n,f=e;return d(),p("div",N,[c("div",z,[c("div",R,[c("div",A,[c("img",{class:"login_panel_form_title_logo",src:t.$GIN_VUE_ADMIN.appLogo,alt:""},null,8,P),c("p",$,u(t.$GIN_VUE_ADMIN.appName),1)]),m(f,{ref_key:"loginForm",ref:w,model:V,rules:U,"validate-on-rule-change":!1,onKeyup:h(x,["enter"])},{default:g((()=>[m(r,{prop:"username"},{default:g((()=>[m(s,{modelValue:V.username,"onUpdate:modelValue":l[0]||(l[0]=a=>V.username=a),size:"large",placeholder:"请输入用户名","suffix-icon":"user"},null,8,["modelValue"])])),_:1}),m(r,{prop:"password"},{default:g((()=>[m(s,{modelValue:V.password,"onUpdate:modelValue":l[1]||(l[1]=a=>V.password=a),"show-password":"",size:"large",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),V.openCaptcha?(d(),v(r,{key:0,prop:"captcha"},{default:g((()=>[c("div",q,[m(s,{modelValue:V.captcha,"onUpdate:modelValue":l[2]||(l[2]=a=>V.captcha=a),placeholder:"请输入验证码",size:"large",style:{flex:"1","padding-right":"20px"}},null,8,["modelValue"]),c("div",D,[k.value?(d(),p("img",{key:0,src:k.value,alt:"请输入验证码",onClick:l[3]||(l[3]=a=>y())},null,8,F)):b("",!0)])])])),_:1})):b("",!0),m(r,null,{default:g((()=>[m(i,{type:"primary",style:{width:"46%"},size:"large",onClick:E},{default:g((()=>[G])),_:1}),m(i,{type:"primary",size:"large",style:{width:"46%","margin-left":"8%"},onClick:x},{default:g((()=>[K])),_:1})])),_:1})])),_:1},8,["model","rules","onKeyup"])]),M,c("div",O,[B,c("div",H,[m(L)])])])])}}}),[["__scopeId","data-v-1819488d"]]);export{Q as default};
