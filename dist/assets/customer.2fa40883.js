/*! 
 Build based on gin-vue-admin 
 Time : 1678354544000 */
/* empty css             */import{E as e}from"./dialog.fa5df2a0.js";import"./overlay.257b737a.js";import{E as a,a as t}from"./form-item.b18f90c3.js";/* empty css              */import{E as l}from"./pagination.e33d475f.js";import"./tag.0bb54889.js";import"./select.0319208d.js";import"./scrollbar.561042ca.js";/* empty css               */import{E as o,a as r}from"./table-column.61571603.js";import"./checkbox.bcafce17.js";/* empty css                */import{E as s}from"./popover.60f34cfa.js";/* empty css               */import{aK as i,r as u,o as m,c as d,e as p,d as c,w as n,a2 as f,J as v,h as b,j as g,E as j,b as y}from"./index.12a9298d.js";import{W as h}from"./warningBar.b44e96f3.js";import{f as w}from"./format.1c8f0142.js";import"./refs.b0cb2972.js";import"./_Uint8Array.f5d85d65.js";import"./_initCloneObject.8371cae6.js";import"./isEqual.471ce309.js";import"./index.bf155b92.js";import"./index.f53077c2.js";import"./strings.e4f34ae9.js";import"./dropdown.469739c6.js";/* empty css             */import"./dictionary.4f143e26.js";import"./sysDictionary.bc8f23a2.js";const k=e=>i({url:"/customer/customer",method:"post",data:e}),C={class:"gva-table-box"},_={class:"gva-btn-list"},V=b("新增"),D=b("变更"),x=c("p",null,"确定要删除吗？",-1),z={style:{"text-align":"right","margin-top":"8px"}},E=b("取消"),I=b("确定"),U=b("删除"),N={class:"gva-pagination"},P={class:"dialog-footer"},S=b("取 消"),A=b("确 定"),O={name:"Customer"},q=Object.assign(O,{setup(b){const O=u({customerName:"",customerPhoneData:""}),q=u(1),B=u(0),J=u(10),K=u([]),L=e=>{J.value=e,W()},T=e=>{q.value=e,W()},W=async()=>{const e=await(a={page:q.value,pageSize:J.value},i({url:"/customer/customerList",method:"get",params:a}));var a;0===e.code&&(K.value=e.data.list,B.value=e.data.total,q.value=e.data.page,J.value=e.data.pageSize)};W();const F=u(!1),G=u(""),H=async e=>{const a=await(t={ID:e.ID},i({url:"/customer/customer",method:"get",params:t}));var t;G.value="update",0===a.code&&(O.value=a.data.customer,F.value=!0)},M=()=>{F.value=!1,O.value={customerName:"",customerPhoneData:""}},Q=async e=>{e.visible=!1;var a;0===(await(a={ID:e.ID},i({url:"/customer/customer",method:"delete",data:a}))).code&&(g({type:"success",message:"删除成功"}),1===K.value.length&&q.value>1&&q.value--,W())},R=async()=>{let e;switch(G.value){case"create":default:e=await k(O.value);break;case"update":e=await(a=O.value,i({url:"/customer/customer",method:"put",data:a}))}var a;0===e.code&&(M(),W())},X=()=>{G.value="create",F.value=!0};return(i,u)=>{const b=j,g=o,k=s,W=r,G=l,Y=y,Z=a,$=t,ee=e;return m(),d("div",null,[p(h,{title:"在资源权限中将此角色的资源权限清空 或者不包含创建者的角色 即可屏蔽此客户资源的显示"}),c("div",C,[c("div",_,[p(b,{type:"primary",icon:"plus",onClick:X},{default:n((()=>[V])),_:1})]),p(W,{ref:"multipleTable",data:K.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID"},{default:n((()=>[p(g,{type:"selection",width:"55"}),p(g,{align:"left",label:"接入日期",width:"180"},{default:n((e=>[c("span",null,f(v(w)(e.row.CreatedAt)),1)])),_:1}),p(g,{align:"left",label:"姓名",prop:"customerName",width:"120"}),p(g,{align:"left",label:"电话",prop:"customerPhoneData",width:"120"}),p(g,{align:"left",label:"接入人ID",prop:"sysUserId",width:"120"}),p(g,{align:"left",label:"按钮组","min-width":"160"},{default:n((e=>[p(b,{type:"primary",link:"",icon:"edit",onClick:a=>H(e.row)},{default:n((()=>[D])),_:2},1032,["onClick"]),p(k,{modelValue:e.row.visible,"onUpdate:modelValue":a=>e.row.visible=a,placement:"top",width:"160"},{reference:n((()=>[p(b,{type:"primary",link:"",icon:"delete",onClick:a=>e.row.visible=!0},{default:n((()=>[U])),_:2},1032,["onClick"])])),default:n((()=>[x,c("div",z,[p(b,{type:"primary",link:"",onClick:a=>e.row.visible=!1},{default:n((()=>[E])),_:2},1032,["onClick"]),p(b,{type:"primary",onClick:a=>Q(e.row)},{default:n((()=>[I])),_:2},1032,["onClick"])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),c("div",N,[p(G,{"current-page":q.value,"page-size":J.value,"page-sizes":[10,30,50,100],total:B.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:T,onSizeChange:L},null,8,["current-page","page-size","total"])])]),p(ee,{modelValue:F.value,"onUpdate:modelValue":u[2]||(u[2]=e=>F.value=e),"before-close":M,title:"客户"},{footer:n((()=>[c("div",P,[p(b,{onClick:M},{default:n((()=>[S])),_:1}),p(b,{type:"primary",onClick:R},{default:n((()=>[A])),_:1})])])),default:n((()=>[p($,{inline:!0,model:O.value,"label-width":"80px"},{default:n((()=>[p(Z,{label:"客户名"},{default:n((()=>[p(Y,{modelValue:O.value.customerName,"onUpdate:modelValue":u[0]||(u[0]=e=>O.value.customerName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),p(Z,{label:"客户电话"},{default:n((()=>[p(Y,{modelValue:O.value.customerPhoneData,"onUpdate:modelValue":u[1]||(u[1]=e=>O.value.customerPhoneData=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{q as default};
