/*! 
 Build based on gin-vue-admin 
 Time : 1678354544000 */
/* empty css             */import{E as e}from"./pagination.e33d475f.js";/* empty css              */import"./tag.0bb54889.js";import"./select.0319208d.js";import"./scrollbar.561042ca.js";/* empty css               */import{E as a,a as l}from"./table-column.61571603.js";import"./checkbox.bcafce17.js";/* empty css                *//* empty css             */import{E as t}from"./popover.60f34cfa.js";import{E as o,a as r}from"./form-item.b18f90c3.js";/* empty css               */import{aK as i,r as s,aB as d,o as u,c as p,d as n,e as c,w as m,a2 as f,h as v,J as g,a1 as b,j as y,b as h,E as w,aw as j}from"./index.12a9298d.js";import{f as _}from"./format.1c8f0142.js";import{E as k}from"./index.f53077c2.js";import"./isEqual.471ce309.js";import"./_Uint8Array.f5d85d65.js";import"./index.bf155b92.js";import"./strings.e4f34ae9.js";import"./_initCloneObject.8371cae6.js";import"./dropdown.469739c6.js";import"./dictionary.4f143e26.js";import"./sysDictionary.bc8f23a2.js";const C={class:"gva-search-box"},V=v("查询"),x=v("重置"),O={class:"gva-table-box"},S={class:"gva-btn-list"},E=n("p",null,"确定要删除吗？",-1),z={style:{"text-align":"right","margin-top":"8px"}},R=v("取消"),U=v("确定"),I=v("删除"),D={class:"popover-box"},N={key:1},A={class:"popover-box"},B={key:1},J=n("p",null,"确定要删除吗？",-1),q={style:{"text-align":"right","margin-top":"8px"}},K=v("取消"),L=v("确定"),P=v("删除"),T={class:"gva-pagination"},F={name:"SysOperationRecord"},G=Object.assign(F,{setup(F){const G=s(1),H=s(0),M=s(10),Q=s([]),W=s({}),X=()=>{W.value={}},Y=()=>{G.value=1,M.value=10,""===W.value.status&&(W.value.status=null),ee()},Z=e=>{M.value=e,ee()},$=e=>{G.value=e,ee()},ee=async()=>{const e=await(a={page:G.value,pageSize:M.value,...W.value},i({url:"/sysOperationRecord/getSysOperationRecordList",method:"get",params:a}));var a;0===e.code&&(Q.value=e.data.list,H.value=e.data.total,G.value=e.data.page,M.value=e.data.pageSize)};ee();const ae=s(!1),le=s([]),te=e=>{le.value=e},oe=async()=>{const e=[];le.value&&le.value.forEach((a=>{e.push(a.ID)}));var a;0===(await(a={ids:e},i({url:"/sysOperationRecord/deleteSysOperationRecordByIds",method:"delete",data:a}))).code&&(y({type:"success",message:"删除成功"}),Q.value.length===e.length&&G.value>1&&G.value--,ae.value=!1,ee())},re=async e=>{e.visible=!1;var a;0===(await(a={ID:e.ID},i({url:"/sysOperationRecord/deleteSysOperationRecord",method:"delete",data:a}))).code&&(y({type:"success",message:"删除成功"}),1===Q.value.length&&G.value>1&&G.value--,ee())},ie=e=>{try{return JSON.parse(e)}catch(a){return e}};return(i,s)=>{const y=h,F=o,ee=w,se=r,de=t,ue=a,pe=k,ne=d("warning"),ce=j,me=l,fe=e;return u(),p("div",null,[n("div",C,[c(se,{inline:!0,model:W.value},{default:m((()=>[c(F,{label:"请求方法"},{default:m((()=>[c(y,{modelValue:W.value.method,"onUpdate:modelValue":s[0]||(s[0]=e=>W.value.method=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),c(F,{label:"请求路径"},{default:m((()=>[c(y,{modelValue:W.value.path,"onUpdate:modelValue":s[1]||(s[1]=e=>W.value.path=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),c(F,{label:"结果状态码"},{default:m((()=>[c(y,{modelValue:W.value.status,"onUpdate:modelValue":s[2]||(s[2]=e=>W.value.status=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),c(F,null,{default:m((()=>[c(ee,{type:"primary",icon:"search",onClick:Y},{default:m((()=>[V])),_:1}),c(ee,{icon:"refresh",onClick:X},{default:m((()=>[x])),_:1})])),_:1})])),_:1},8,["model"])]),n("div",O,[n("div",S,[c(de,{modelValue:ae.value,"onUpdate:modelValue":s[5]||(s[5]=e=>ae.value=e),placement:"top",width:"160"},{reference:m((()=>[c(ee,{icon:"delete",style:{"margin-left":"10px"},disabled:!le.value.length,onClick:s[4]||(s[4]=e=>ae.value=!0)},{default:m((()=>[I])),_:1},8,["disabled"])])),default:m((()=>[E,n("div",z,[c(ee,{type:"primary",link:"",onClick:s[3]||(s[3]=e=>ae.value=!1)},{default:m((()=>[R])),_:1}),c(ee,{type:"primary",onClick:oe},{default:m((()=>[U])),_:1})])])),_:1},8,["modelValue"])]),c(me,{ref:"multipleTable",data:Q.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSelectionChange:te},{default:m((()=>[c(ue,{align:"left",type:"selection",width:"55"}),c(ue,{align:"left",label:"操作人",width:"140"},{default:m((e=>[n("div",null,f(e.row.user.userName)+"("+f(e.row.user.nickName)+")",1)])),_:1}),c(ue,{align:"left",label:"日期",width:"180"},{default:m((e=>[v(f(g(_)(e.row.CreatedAt)),1)])),_:1}),c(ue,{align:"left",label:"状态码",prop:"status",width:"120"},{default:m((e=>[n("div",null,[c(pe,{type:"success"},{default:m((()=>[v(f(e.row.status),1)])),_:2},1024)])])),_:1}),c(ue,{align:"left",label:"请求IP",prop:"ip",width:"120"}),c(ue,{align:"left",label:"请求方法",prop:"method",width:"120"}),c(ue,{align:"left",label:"请求路径",prop:"path",width:"240"}),c(ue,{align:"left",label:"请求",prop:"path",width:"80"},{default:m((e=>[n("div",null,[e.row.body?(u(),b(de,{key:0,placement:"left-start",trigger:"click"},{reference:m((()=>[c(ce,{style:{cursor:"pointer"}},{default:m((()=>[c(ne)])),_:1})])),default:m((()=>[n("div",D,[n("pre",null,f(ie(e.row.body)),1)])])),_:2},1024)):(u(),p("span",N,"无"))])])),_:1}),c(ue,{align:"left",label:"响应",prop:"path",width:"80"},{default:m((e=>[n("div",null,[e.row.resp?(u(),b(de,{key:0,placement:"left-start",trigger:"click"},{reference:m((()=>[c(ce,{style:{cursor:"pointer"}},{default:m((()=>[c(ne)])),_:1})])),default:m((()=>[n("div",A,[n("pre",null,f(ie(e.row.resp)),1)])])),_:2},1024)):(u(),p("span",B,"无"))])])),_:1}),c(ue,{align:"left",label:"按钮组"},{default:m((e=>[c(de,{modelValue:e.row.visible,"onUpdate:modelValue":a=>e.row.visible=a,placement:"top",width:"160"},{reference:m((()=>[c(ee,{icon:"delete",type:"primary",link:"",onClick:a=>e.row.visible=!0},{default:m((()=>[P])),_:2},1032,["onClick"])])),default:m((()=>[J,n("div",q,[c(ee,{type:"primary",link:"",onClick:a=>e.row.visible=!1},{default:m((()=>[K])),_:2},1032,["onClick"]),c(ee,{type:"primary",onClick:a=>re(e.row)},{default:m((()=>[L])),_:2},1032,["onClick"])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),n("div",T,[c(fe,{"current-page":G.value,"page-size":M.value,"page-sizes":[10,30,50,100],total:H.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:$,onSizeChange:Z},null,8,["current-page","page-size","total"])])])])}}});export{G as default};
