/*! 
 Build based on gin-vue-admin 
 Time : 1678354544000 */
/* empty css             */import{E as a,a as t}from"./checkbox.bcafce17.js";/* empty css               */import{s as e}from"./authority.fe1b2d97.js";import{W as r}from"./warningBar.b44e96f3.js";import{r as o,o as l,c as u,e as i,d as s,w as n,V as d,aD as c,h,j as y,E as f,a1 as m,a2 as p}from"./index.12a9298d.js";import"./isEqual.471ce309.js";import"./_Uint8Array.f5d85d65.js";/* empty css             */const v={class:"clearfix sticky-button",style:{margin:"18px"}},I=h("确 定"),g=h("全选"),w=h("本角色"),b=h("本角色及子角色"),j={class:"tree-content"},A={name:"Datas"},x=Object.assign(A,{props:{row:{default:function(){return{}},type:Object},authority:{default:function(){return[]},type:Array}},emits:["changeRow"],setup(A,{expose:x,emit:k}){const _=A,C=o([]),E=o(!1),R=a=>{a&&a.forEach((a=>{const t={};t.authorityId=a.authorityId,t.authorityName=a.authorityName,C.value.push(t),a.children&&a.children.length&&R(a.children)}))},N=o([]);R(_.authority),_.row.dataAuthorityId&&_.row.dataAuthorityId.forEach((a=>{const t=C.value&&C.value.filter((t=>t.authorityId===a.authorityId))&&C.value.filter((t=>t.authorityId===a.authorityId))[0];N.value.push(t)}));const V=()=>{N.value=[...C.value],k("changeRow","dataAuthorityId",N.value),E.value=!0},O=()=>{N.value=C.value.filter((a=>a.authorityId===_.row.authorityId)),k("changeRow","dataAuthorityId",N.value),E.value=!0},D=()=>{const a=[];U(_.row,a),N.value=C.value.filter((t=>a.indexOf(t.authorityId)>-1)),k("changeRow","dataAuthorityId",N.value),E.value=!0},U=(a,t)=>{t.push(a.authorityId),a.children&&a.children.forEach((a=>{U(a,t)}))},q=async()=>{0===(await e(_.row)).code&&y({type:"success",message:"资源设置成功"})},B=()=>{k("changeRow","dataAuthorityId",N.value),E.value=!0};return x({enterAndNext:()=>{q()},needConfirm:E}),(e,o)=>{const y=f,A=a,x=t;return l(),u("div",null,[i(r,{title:"此功能仅用于创建角色和角色的many2many关系表，具体使用还须自己结合表实现业务，详情参考示例代码（客户示例）。此功能不建议使用，建议使用插件市场【组织管理功能（点击前往）】来管理资源权限。",href:"https://plugin.gin-vue-admin.com/#/layout/newPluginInfo?id=36"}),s("div",v,[i(y,{class:"fl-right",type:"primary",onClick:q},{default:n((()=>[I])),_:1}),i(y,{class:"fl-left",type:"primary",onClick:V},{default:n((()=>[g])),_:1}),i(y,{class:"fl-left",type:"primary",onClick:O},{default:n((()=>[w])),_:1}),i(y,{class:"fl-left",type:"primary",onClick:D},{default:n((()=>[b])),_:1})]),s("div",j,[i(x,{modelValue:N.value,"onUpdate:modelValue":o[0]||(o[0]=a=>N.value=a),onChange:B},{default:n((()=>[(l(!0),u(d,null,c(C.value,((a,t)=>(l(),m(A,{key:t,label:a},{default:n((()=>[h(p(a.authorityName),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])])}}});export{x as default};
