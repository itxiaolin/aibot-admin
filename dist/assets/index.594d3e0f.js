/*! 
 Build based on gin-vue-admin 
 Time : 1678354544000 */
/* empty css             */import{E as a}from"./pagination.e33d475f.js";/* empty css              */import"./tag.0bb54889.js";import"./select.0319208d.js";import"./scrollbar.561042ca.js";/* empty css               */import{E as t,a as e}from"./table-column.61571603.js";import"./checkbox.bcafce17.js";/* empty css                *//* empty css               */import{f as i,h as n,r as o}from"./autoCode.fc1563f7.js";import{_ as l,u as s,r,o as c,c as p,d,e as u,w as m,h as f,a2 as b,J as g,a1 as y,c1 as j,j as w,E as v}from"./index.12a9298d.js";import{f as h}from"./format.1c8f0142.js";import{E as C}from"./index.f53077c2.js";import"./isEqual.471ce309.js";import"./_Uint8Array.f5d85d65.js";import"./index.bf155b92.js";import"./strings.e4f34ae9.js";import"./_initCloneObject.8371cae6.js";import"./dictionary.4f143e26.js";import"./sysDictionary.bc8f23a2.js";const k={class:"gva-table-box"},x={class:"gva-btn-list"},_=f("新增"),T=f(" 已回滚 "),B=f(" 未回滚 "),z=f("回滚(删表)"),N=f("回滚(不删表)"),D=f("复用"),E=f("删除"),I={class:"gva-pagination"},A={name:"AutoCodeAdmin"},S=l(Object.assign(A,{setup(l){const A=s(),S=r(1),O=r(0),q=r(10),J=r([]),U=a=>{q.value=a,G()},F=a=>{S.value=a,G()},G=async()=>{const a=await i({page:S.value,pageSize:q.value});0===a.code&&(J.value=a.data.list,O.value=a.data.total,S.value=a.data.page,q.value=a.data.pageSize)};G();const H=async(a,t)=>{t?j.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{j.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{j.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await o({id:Number(a.ID),deleteTable:t})).code&&(w.success("回滚成功"),G())}))}))})):j.confirm("此操作将删除自动创建的文件和api, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await o({id:Number(a.ID),deleteTable:t})).code&&(w.success("回滚成功"),G())}))},K=a=>{a?A.push({name:"autoCodeEdit",params:{id:a.ID}}):A.push({name:"autoCode"})};return(i,o)=>{const l=v,s=t,r=C,A=e,L=a;return c(),p("div",null,[d("div",k,[d("div",x,[u(l,{type:"primary",icon:"plus",onClick:o[0]||(o[0]=a=>K(null))},{default:m((()=>[_])),_:1})]),u(A,{data:J.value},{default:m((()=>[u(s,{type:"selection",width:"55"}),u(s,{align:"left",label:"id",width:"60",prop:"ID"}),u(s,{align:"left",label:"日期",width:"180"},{default:m((a=>[f(b(g(h)(a.row.CreatedAt)),1)])),_:1}),u(s,{align:"left",label:"结构体名","min-width":"150",prop:"structName"}),u(s,{align:"left",label:"结构体描述","min-width":"150",prop:"structCNName"}),u(s,{align:"left",label:"表名称","min-width":"150",prop:"tableName"}),u(s,{align:"left",label:"回滚标记","min-width":"150",prop:"flag"},{default:m((a=>[a.row.flag?(c(),y(r,{key:0,type:"danger",effect:"dark"},{default:m((()=>[T])),_:1})):(c(),y(r,{key:1,type:"success",effect:"dark"},{default:m((()=>[B])),_:1}))])),_:1}),u(s,{align:"left",label:"操作","min-width":"240"},{default:m((a=>[d("div",null,[u(l,{type:"primary",link:"",disabled:1===a.row.flag,onClick:t=>H(a.row,!0)},{default:m((()=>[z])),_:2},1032,["disabled","onClick"]),u(l,{type:"primary",link:"",disabled:1===a.row.flag,onClick:t=>H(a.row,!1)},{default:m((()=>[N])),_:2},1032,["disabled","onClick"]),u(l,{type:"primary",link:"",onClick:t=>K(a.row)},{default:m((()=>[D])),_:2},1032,["onClick"]),u(l,{type:"primary",link:"",onClick:t=>(async a=>{j.confirm("此操作将删除本历史, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await n({id:Number(a.ID)})).code&&(w.success("删除成功"),G())}))})(a.row)},{default:m((()=>[E])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),d("div",I,[u(L,{"current-page":S.value,"page-size":q.value,"page-sizes":[10,30,50,100],total:O.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:F,onSizeChange:U},null,8,["current-page","page-size","total"])])])])}}}),[["__scopeId","data-v-b205a04e"]]);export{S as default};
