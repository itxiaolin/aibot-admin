/*! 
 Build based on gin-vue-admin 
 Time : 1678354544000 */
/* empty css             */import{E as e}from"./dialog.fa5df2a0.js";import"./overlay.257b737a.js";import{E as l,a}from"./form-item.b18f90c3.js";/* empty css                *//* empty css               */import{E as t}from"./radio.abe700d6.js";/* empty css              */import"./tag.0bb54889.js";import{E as o}from"./checkbox.bcafce17.js";import"./scrollbar.561042ca.js";import{E as u,a as d}from"./select.0319208d.js";import{E as i,a as n}from"./table-column.61571603.js";/* empty css             *//* empty css               */import{_ as p,a as r,r as m,aB as s,o as c,c as v,d as f,e as b,w as h,a2 as y,a1 as w,a4 as g,f as V,h as _,cS as k,c1 as I,cT as j,j as x,cU as D,cV as U,cW as C,E as B,aw as E,b as N,bi as T,bj as q}from"./index.12a9298d.js";import A from"./icon.dfbce0f1.js";import{W as S}from"./warningBar.b44e96f3.js";import{c as M}from"./authorityBtn.65dcb897.js";import{E as z}from"./index.bf155b92.js";import"./refs.b0cb2972.js";import"./_Uint8Array.f5d85d65.js";import"./_initCloneObject.8371cae6.js";import"./rand.6d0d1e93.js";import"./strings.e4f34ae9.js";import"./isEqual.471ce309.js";import"./index.f53077c2.js";const F=e=>(T("data-v-311c9659"),e=e(),q(),e),P={class:"gva-table-box"},O={class:"gva-btn-list"},W=_("新增根菜单"),$={key:0,class:"icon-column"},H=_("添加子菜单"),K=_("编辑"),Q=_("删除"),G={style:{display:"inline-flex","align-items":"center"}},J=F((()=>f("span",null,"路由Path",-1))),L=_("添加参数"),R=F((()=>f("span",{style:{"font-size":"12px","margin-right":"12px"}},"如果菜单包含子菜单，请创建router-view二级路由页面或者",-1))),X=_("点我设置"),Y=F((()=>f("span",null," 高亮菜单 ",-1))),Z=F((()=>f("span",null," 是否为基础页面 ",-1))),ee=_("新增菜单参数"),le=_("删除"),ae=_("新增可控按钮"),te=_("删除"),oe={class:"dialog-footer"},ue=_("取 消"),de=_("确 定"),ie={name:"Menus"},ne=p(Object.assign(ie,{setup(p){const _=r({path:[{required:!0,message:"请输入菜单name",trigger:"blur"}],component:[{required:!0,message:"请输入文件路径",trigger:"blur"}],"meta.title":[{required:!0,message:"请输入菜单展示名称",trigger:"blur"}]}),T=m(1),q=m(0),F=m(999),ie=m([]),ne=m({}),pe=async()=>{const e=await k({page:T.value,pageSize:F.value,...ne.value});0===e.code&&(ie.value=e.data.list,q.value=e.data.total,T.value=e.data.page,F.value=e.data.pageSize)};pe();const re=()=>{me.value.component=me.value.component.replace(/\\/g,"/")},me=m({ID:0,path:"",name:"",hidden:!1,parentId:"",component:"",meta:{activeName:"",title:"",icon:"",defaultMenu:!1,closeTab:!1,keepAlive:!1},parameters:[],menuBtn:[]}),se=()=>{me.value.path=me.value.name},ce=e=>{be(),e()},ve=m(null),fe=m(!1),be=()=>{fe.value=!1,ve.value.resetFields(),me.value={ID:0,path:"",name:"",hidden:!1,parentId:"",component:"",meta:{title:"",icon:"",defaultMenu:!1,closeTab:!1,keepAlive:!1}}},he=m(!1),ye=()=>{be(),he.value=!1},we=async()=>{ve.value.validate((async e=>{if(e){let e;e=ke.value?await D(me.value):await U(me.value),0===e.code&&(x({type:"success",message:ke.value?"编辑成功":"添加成功!"}),pe()),be(),he.value=!1}}))},ge=m([{ID:"0",title:"根菜单"}]),Ve=()=>{ge.value=[{ID:"0",title:"根目录"}],_e(ie.value,ge.value,!1)},_e=(e,l,a)=>{e&&e.forEach((e=>{if(e.children&&e.children.length){const t={title:e.meta.title,ID:String(e.ID),disabled:a||e.ID===me.value.ID,children:[]};_e(e.children,t.children,a||e.ID===me.value.ID),l.push(t)}else{const t={title:e.meta.title,ID:String(e.ID),disabled:a||e.ID===me.value.ID};l.push(t)}}))},ke=m(!1),Ie=m("新增菜单"),je=e=>{Ie.value="新增菜单",me.value.parentId=String(e),ke.value=!1,Ve(),he.value=!0};return(p,r)=>{const m=B,k=i,D=E,U=n,q=N,F=l,ne=o,be=u,_e=d,xe=t,De=s("QuestionFilled"),Ue=z,Ce=a,Be=e;return c(),v("div",null,[f("div",P,[f("div",O,[b(m,{type:"primary",icon:"plus",onClick:r[0]||(r[0]=e=>je("0"))},{default:h((()=>[W])),_:1})]),b(U,{data:ie.value,"row-key":"ID"},{default:h((()=>[b(k,{align:"left",label:"ID","min-width":"100",prop:"ID"}),b(k,{align:"left",label:"展示名称","min-width":"120",prop:"authorityName"},{default:h((e=>[f("span",null,y(e.row.meta.title),1)])),_:1}),b(k,{align:"left",label:"图标","min-width":"140",prop:"authorityName"},{default:h((e=>[e.row.meta.icon?(c(),v("div",$,[b(D,null,{default:h((()=>[(c(),w(g(e.row.meta.icon)))])),_:2},1024),f("span",null,y(e.row.meta.icon),1)])):V("",!0)])),_:1}),b(k,{align:"left",label:"路由Name","show-overflow-tooltip":"","min-width":"160",prop:"name"}),b(k,{align:"left",label:"路由Path","show-overflow-tooltip":"","min-width":"160",prop:"path"}),b(k,{align:"left",label:"是否隐藏","min-width":"100",prop:"hidden"},{default:h((e=>[f("span",null,y(e.row.hidden?"隐藏":"显示"),1)])),_:1}),b(k,{align:"left",label:"父节点","min-width":"90",prop:"parentId"}),b(k,{align:"left",label:"排序","min-width":"70",prop:"sort"}),b(k,{align:"left",label:"文件路径","min-width":"360",prop:"component"}),b(k,{align:"left",fixed:"right",label:"操作",width:"300"},{default:h((e=>[b(m,{type:"primary",link:"",icon:"plus",onClick:l=>je(e.row.ID)},{default:h((()=>[H])),_:2},1032,["onClick"]),b(m,{type:"primary",link:"",icon:"edit",onClick:l=>(async e=>{Ie.value="编辑菜单";const l=await C({id:e});me.value=l.data.menu,ke.value=!0,Ve(),he.value=!0})(e.row.ID)},{default:h((()=>[K])),_:2},1032,["onClick"]),b(m,{type:"primary",link:"",icon:"delete",onClick:l=>{return a=e.row.ID,void I.confirm("此操作将永久删除所有角色下该菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await j({ID:a})).code&&(x({type:"success",message:"删除成功!"}),1===ie.value.length&&T.value>1&&T.value--,pe())})).catch((()=>{x({type:"info",message:"已取消删除"})}));var a}},{default:h((()=>[Q])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),b(Be,{modelValue:he.value,"onUpdate:modelValue":r[16]||(r[16]=e=>he.value=e),"before-close":ce,title:Ie.value},{footer:h((()=>[f("div",oe,[b(m,{onClick:ye},{default:h((()=>[ue])),_:1}),b(m,{type:"primary",onClick:we},{default:h((()=>[de])),_:1})])])),default:h((()=>[b(S,{title:"新增菜单，需要在角色管理内配置权限才可使用"}),he.value?(c(),w(Ce,{key:0,ref_key:"menuForm",ref:ve,inline:!0,model:me.value,rules:_,"label-position":"top","label-width":"85px"},{default:h((()=>[b(F,{label:"路由Name",prop:"path",style:{width:"30%"}},{default:h((()=>[b(q,{modelValue:me.value.name,"onUpdate:modelValue":r[1]||(r[1]=e=>me.value.name=e),autocomplete:"off",placeholder:"唯一英文字符串",onChange:se},null,8,["modelValue"])])),_:1}),b(F,{prop:"path",style:{width:"30%"}},{label:h((()=>[f("span",G,[J,b(ne,{modelValue:fe.value,"onUpdate:modelValue":r[2]||(r[2]=e=>fe.value=e),style:{"margin-left":"12px",height:"auto"}},{default:h((()=>[L])),_:1},8,["modelValue"])])])),default:h((()=>[b(q,{modelValue:me.value.path,"onUpdate:modelValue":r[3]||(r[3]=e=>me.value.path=e),disabled:!fe.value,autocomplete:"off",placeholder:"建议只在后方拼接参数"},null,8,["modelValue","disabled"])])),_:1}),b(F,{label:"是否隐藏",style:{width:"30%"}},{default:h((()=>[b(_e,{modelValue:me.value.hidden,"onUpdate:modelValue":r[4]||(r[4]=e=>me.value.hidden=e),placeholder:"是否在列表隐藏"},{default:h((()=>[b(be,{value:!1,label:"否"}),b(be,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1}),b(F,{label:"父节点ID",style:{width:"30%"}},{default:h((()=>[b(xe,{modelValue:me.value.parentId,"onUpdate:modelValue":r[5]||(r[5]=e=>me.value.parentId=e),style:{width:"100%"},disabled:!ke.value,options:ge.value,props:{checkStrictly:!0,label:"title",value:"ID",disabled:"disabled",emitPath:!1},"show-all-levels":!1,filterable:""},null,8,["modelValue","disabled","options"])])),_:1}),b(F,{label:"文件路径",prop:"component",style:{width:"60%"}},{default:h((()=>[b(q,{modelValue:me.value.component,"onUpdate:modelValue":r[6]||(r[6]=e=>me.value.component=e),autocomplete:"off",placeholder:"页面:view/xxx/xx.vue 插件:plugin/xx/xx.vue",onBlur:re},null,8,["modelValue"]),R,b(m,{style:{"margin-top":"4px"},onClick:r[7]||(r[7]=e=>me.value.component="view/routerHolder.vue")},{default:h((()=>[X])),_:1})])),_:1}),b(F,{label:"展示名称",prop:"meta.title",style:{width:"30%"}},{default:h((()=>[b(q,{modelValue:me.value.meta.title,"onUpdate:modelValue":r[8]||(r[8]=e=>me.value.meta.title=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),b(F,{label:"图标",prop:"meta.icon",style:{width:"30%"}},{default:h((()=>[b(A,{meta:me.value.meta,style:{width:"100%"}},null,8,["meta"])])),_:1}),b(F,{label:"排序标记",prop:"sort",style:{width:"30%"}},{default:h((()=>[b(q,{modelValue:me.value.sort,"onUpdate:modelValue":r[9]||(r[9]=e=>me.value.sort=e),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])])),_:1}),b(F,{prop:"meta.activeName",style:{width:"30%"}},{label:h((()=>[f("div",null,[Y,b(Ue,{content:"注：当到达此路由时候，指定左侧菜单指定name会处于活跃状态（亮起），可为空，为空则为本路由Name。",placement:"top",effect:"light"},{default:h((()=>[b(D,null,{default:h((()=>[b(De)])),_:1})])),_:1})])])),default:h((()=>[b(q,{modelValue:me.value.meta.activeName,"onUpdate:modelValue":r[10]||(r[10]=e=>me.value.meta.activeName=e),placeholder:me.value.name,autocomplete:"off"},null,8,["modelValue","placeholder"])])),_:1}),b(F,{label:"KeepAlive",prop:"meta.keepAlive",style:{width:"30%"}},{default:h((()=>[b(_e,{modelValue:me.value.meta.keepAlive,"onUpdate:modelValue":r[11]||(r[11]=e=>me.value.meta.keepAlive=e),style:{width:"100%"},placeholder:"是否keepAlive缓存页面"},{default:h((()=>[b(be,{value:!1,label:"否"}),b(be,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1}),b(F,{label:"CloseTab",prop:"meta.closeTab",style:{width:"30%"}},{default:h((()=>[b(_e,{modelValue:me.value.meta.closeTab,"onUpdate:modelValue":r[12]||(r[12]=e=>me.value.meta.closeTab=e),style:{width:"100%"},placeholder:"是否自动关闭tab"},{default:h((()=>[b(be,{value:!1,label:"否"}),b(be,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1}),b(F,{style:{width:"30%"}},{label:h((()=>[f("div",null,[Z,b(Ue,{content:"此项选择为是，则不会展示左侧菜单以及顶部信息。",placement:"top",effect:"light"},{default:h((()=>[b(D,null,{default:h((()=>[b(De)])),_:1})])),_:1})])])),default:h((()=>[b(_e,{modelValue:me.value.meta.defaultMenu,"onUpdate:modelValue":r[13]||(r[13]=e=>me.value.meta.defaultMenu=e),style:{width:"100%"},placeholder:"是否为基础页面"},{default:h((()=>[b(be,{value:!1,label:"否"}),b(be,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])):V("",!0),f("div",null,[b(m,{type:"primary",icon:"edit",onClick:r[14]||(r[14]=e=>{return(l=me.value).parameters||(l.parameters=[]),void l.parameters.push({type:"query",key:"",value:""});var l})},{default:h((()=>[ee])),_:1}),b(U,{data:me.value.parameters,style:{width:"100%","margin-top":"12px"}},{default:h((()=>[b(k,{align:"left",prop:"type",label:"参数类型",width:"180"},{default:h((e=>[b(_e,{modelValue:e.row.type,"onUpdate:modelValue":l=>e.row.type=l,placeholder:"请选择"},{default:h((()=>[b(be,{key:"query",value:"query",label:"query"}),b(be,{key:"params",value:"params",label:"params"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),b(k,{align:"left",prop:"key",label:"参数key",width:"180"},{default:h((e=>[f("div",null,[b(q,{modelValue:e.row.key,"onUpdate:modelValue":l=>e.row.key=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),b(k,{align:"left",prop:"value",label:"参数值"},{default:h((e=>[f("div",null,[b(q,{modelValue:e.row.value,"onUpdate:modelValue":l=>e.row.value=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),b(k,{align:"left"},{default:h((e=>[f("div",null,[b(m,{type:"danger",icon:"delete",onClick:l=>{return a=me.value.parameters,t=e.$index,void a.splice(t,1);var a,t}},{default:h((()=>[le])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),b(m,{style:{"margin-top":"12px"},type:"primary",icon:"edit",onClick:r[15]||(r[15]=e=>{return(l=me.value).menuBtn||(l.menuBtn=[]),void l.menuBtn.push({name:"",desc:""});var l})},{default:h((()=>[ae])),_:1}),b(U,{data:me.value.menuBtn,style:{width:"100%","margin-top":"12px"}},{default:h((()=>[b(k,{align:"left",prop:"name",label:"按钮名称",width:"180"},{default:h((e=>[f("div",null,[b(q,{modelValue:e.row.name,"onUpdate:modelValue":l=>e.row.name=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),b(k,{align:"left",prop:"name",label:"备注",width:"180"},{default:h((e=>[f("div",null,[b(q,{modelValue:e.row.desc,"onUpdate:modelValue":l=>e.row.desc=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),b(k,{align:"left"},{default:h((e=>[f("div",null,[b(m,{type:"danger",icon:"delete",onClick:l=>(async(e,l)=>{const a=e[l];if(0===a.ID)return void e.splice(l,1);0===(await M({id:a.ID})).code&&e.splice(l,1)})(me.value.menuBtn,e.$index)},{default:h((()=>[te])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-311c9659"]]);export{ne as default};
